<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>RediLauncher</title>
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700">
    <link rel="stylesheet" href="assets/css/styles.css">
    <script src="https://use.fontawesome.com/releases/v5.13.0/js/all.js" data-auto-replace-svg="nest"></script>
    <script src="src/karina-lib/sessionManager.js"></script>
</head>

<body>
    <nav class="navbar fixed-top justify-content-end p-0">
        <div class="title-controls-dragarea">&nbsp</div>
        <div class="nav-item nav-link btn btn-sm btn-titlebar py-1" id="minimise-button" type="button"
            aria-label="Minimize" role="button" href="#">
            <i class="fas fa-window-minimize fa-sm"></i>
        </div>
        <div class="nav-item nav-link btn btn-sm btn-titlebar py-1" id="maximise-button" type="button"
            aria-label="Maximize" role="button" href="#">
            <i class="far fa-window-maximize fa-sm"></i>
        </div>
        <div class="nav-item nav-link btn btn-sm btn-titlebar-close py-1" id="close-button" type="button"
            aria-label="Close" role="button" href="#" onclick="window.close()">
            <i class="fas fa-times fa-lg"></i>
        </div>
    </nav>
    <div class="row titlebar-offset">
        <div class="col-auto">

        </div>
        <div class="col">

        </div>
        <div class="col-auto">
            <div class="card bg-transparent m-3 border-0" id="accountPanel" role="alert" aria-live="assertive"
                aria-atomic="true">
                <button id="accountName" class="btn p-2 dropdown text-white">
                    <img id="accountPfp" class="mr-2 py-0"
                        src="https://cdn.discordapp.com/avatars/222954293374746626/785aa138d6eefc93686b2c354bafef08.png?size=2048"
                        alt="dbmrawdata" width="32" height="32" style="border-radius: .25rem;">
                    MCUsernameBuffer
                </button>
                <hr class="m-0">
                <button id="auth-indicator" class="btn btn-sm py-2 bg-none border-top-0">
                    <span id="auth-indicator-text" class=''>Logging In</span>
                    <span id="auth-indicator-icon" class="fas fa-circle-notch spinning"></span>
                </button>
            </div>
        </div>
    </div>
    <div class="row justify-content-center">
        <div class="col"></div>
        <div class="col-6 col-xl-4">
            <img class="hero-img" src="assets/img/minecraft-logo.png">
            <p class="text-white">A custom made Minecraft Mod Launcher for private use as well
                as a sm0l project.</p>
            <button class="btn btn-primary" id="playBtn2">Play Velox Reloaded</button>
            <button class="btn btn-primary" id="update-btn">Update Test</button>
        </div>
        <div class="col"></div>
    </div>

    </div>
    <div class="header-blue d-none">
        <div class="container hero">
            <div class="row">
                <div class="col-12 col-lg-6 col-xl-5 offset-xl-1">
                    <h1 style="padding-top: -24px;padding-bottom: 20px;">Retrieving database data...</h1>
                    <p>Please wait as we're establishing a handshake to the Velox Services...</p><button
                        class="btn btn-light btn-lg action-button" type="button">Learn More</button>
                </div>
                <div class="col-md-5 col-lg-5 offset-lg-1 offset-xl-0 d-none d-lg-block phone-holder">
                    <div class="iphone-mockup"></div>
                </div>
            </div>
        </div>
    </div>

    <section id="download-bar" class="bg-transparent p-3 hidden">
        <div class="row align-items-center">
            <div class="col flex-grow-1">
                <div class="progress bg-transparent-dark progress-download">
                    <div class="progress-bar bg-white scanning" role="progressbar" style="width: 75%" aria-valuenow="50"
                        aria-valuemin="0" aria-valuemax="100"></div>
                </div>
            </div>
            <div class="col-auto">
                <div id="download-spinner" class="spinner-border text-white" role="status">
                    <span class="sr-only">Loading...</span>
                </div>
                <div id="download-infotext" class="align-self-center text-center text-white d-none">
                    <strong><span id="download-progress-percent">20</span>%</strong>
                    (<span id="download-progress-time">01:02:03</span> left)
                </div>
            </div>
        </div>
    </section>

    <script>
        if (typeof module === 'object') {
            window.module = module;
            module = undefined;
        }
    </script>

    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="assets/js/bs-init.js"></script>

    <script>
        function $$(selector) {
            return document.querySelector(selector);
        }

        $$("#update-btn").onclick = () => $$("#download-bar").classList.toggle(
            "hidden");

        function flashAuthIndicator(text, icon, iconSpinning) {
            const btn = $$("#auth-indicator");

            $$("#auth-indicator-icon svg").classList.remove("*");

            $$("#auth-indicator-icon svg").classList.add(icon)
            $$("#auth-indicator-icon svg").classList.add("svg-inline--fa")
            $$("#auth-indicator-icon svg").classList.add("fa-w-16");

            if(iconSpinning === true) {
                $$("#auth-indicator-icon").classList.add("spinning");
            } else {
                $$("#auth-indicator-icon").classList.remove("spinning");
            }

            $$("#auth-indicator-text").innerHTML = text;
            btn.classList.add("flash");
            setTimeout(() => btn.classList.remove("flash"), 200)
        }
        
        $$("#auth-indicator").onclick = () => flashAuthIndicator("Success", "fa-check", false);
    </script>

    <!-- Insert this line after script imports -->
    <script>
        if (window.module) module = window.module;
    </script>
</body>

</html>